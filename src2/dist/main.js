(()=>{var e={177:e=>{e.exports={n:function(){get({url:"user/change/password",data:{npw:$("#a_npw").val(),opw:$("#a_opw").val()},p:"account"},(function(e){alert(e.msg),getuserinfo(),1==e.code&&(location.href="")}))},l:function(e){post({url:"user/change/info",data:{data:$("#i-input-"+e).val(),t:e},p:"changeinfo"},(function(e){alert(e.msg),1==data.code&&(location.href="")}))},head:function(){v.detail.image?post({url:"user/change/info",data:{data:v.detail.image,t:2},p:"changeinfo"},(function(e){alert(e.msg),location.href=""})):alert("请选择图片并等待上传完毕后再继续操作")},update:function(){1!=v.waitRequest.cover?(setCookie("newpage",v.account.newpage,999),post({url:"user/info/update",data:{data:{image:v.detail.image,darkmode:v.detail.darkmode,nickname:$("#i-input-0").val(),introduce:$("#i-input-1").val()}},p:"changeinfo"},(function(e){alert(e.msg)}))):alert("请选择图片并等待上传完毕后再继续操作")},edits:e=>{let t={};t[["","nickname","introduce"][e]]=$("#"+["","nnedit","iedit"][e]).val(),post({url:"user/info/update",data:{data:t},p:"changeinfo"},(function(e){alert(e.msg),getuserinfo(),location.href+="&time="+new Date/1}))},newpage:getCookie("newpage")}},201:e=>{e.exports={send:function(e,t){if(e)return void this.reply(e);let n=$("#comment").val();n&&post({url:"comment/",data:{comment:n,touser:2==v.comment.t[v.viewmode]?v.studio.info.id:3==v.comment.t[v.viewmode]?v.forum.post.text.id:v.workview.id,type:v.comment.t[v.viewmode]},p:"comment"},(e=>{v.comment.text.comment="",console.log(e),alert("发送成功"),v.comment.getcomment()}))},getcomment:()=>{Vue.set(v.comment,"comment",[]),get({url:"comment/",data:{id:2==v.comment.t[v.viewmode]?v.studio.info.id:3==v.comment.t[v.viewmode]?v.forum.post.text.id:v.workview.id,type:v.comment.t[v.viewmode],l:6,o:6*(v.comment.page-1)}},(e=>{let t=e.data;Math.ceil(t.num/6)<v.comment.page&&0!=t.num&&(v.comment.page=Math.ceil(t.num/6));for(let e in t.comment)t.comment[e].comment=markdownToHtml(t.comment[e].comment),t.comment[e].time=other.date(t.comment[e].time);for(let e in t.reply)for(let n in t.reply[e])t.reply[e][n].comment=t.reply[e][n].comment?markdownToHtml(t.reply[e][n].comment):"",t.reply[e][n].time=other.date(t.reply[e][n].time);Vue.set(v.comment,"comment",t),setTimeout((()=>{viewer.update(),scratchblocks.renderMatching("code.language-scratch3,code.language-scratch-blocks",{style:"scratch3",languages:["en"],scale:1})}),300),console.log("获取评论",e)}))},delete:async function(e){confirm("你确定要删除此评论吗")&&post({url:"comment/delete",data:{id:e,type:v.comment.t[v.viewmode]},p:"commentdelete"},(e=>{console.log(e),alert("删除成功"),v.comment.getcomment()}))},deletereply:async function(e){confirm("你确定要删除此评论吗")&&post({url:"comment/reply/delete",data:{id:e,type:v.comment.t[v.viewmode]},p:"commentdelete"},(e=>{console.log(e),alert("删除成功"),v.comment.getcomment()}))},reply:e=>{let t=$("#c-"+e).val();t&&post({url:"comment/reply",data:{comment:t,toid:e,type:v.comment.t[v.viewmode],torid:v.comment.rid},p:"comment"+e},(t=>{console.log(t),v.comment.text[e]="",alert("发送成功"),v.comment.getcomment()}))},showreply:function(e,t){Vue.set(v.comment,"replyid",e),v.comment.rid=t||null,setTimeout((()=>{$("#c-"+v.comment.replyid).unbind("paste"),$("#c-"+e).bind("paste",v.paste)}),10)},replyid:null,comment:{},text:{},page:1,rid:null,t:{user:0,work:1,studio:2,post:3}}},956:e=>{e.exports={list:[],studio:{},sending:0,getlist:()=>{get({url:"forum/list",data:{sid:getQueryString("sid"),page:getQueryString("page")||1}},(e=>{-1!=e.code?(v.forum.list=e.data.list,v.forum.studio=e.data.studio,v.forum.user=e.data.user):dialog(e.msg)}))},get:()=>{get({url:"forum/post",data:{sid:getQueryString("sid"),page:getQueryString("page")||1}},(e=>{-1!=e.code||dialog(e.msg)}))},send:()=>{$("#ftitle").val().length<3||$("#fcontext").val().length<3?alert("标题和正文必须大于2个字"):(v.forum.sending=1,post({url:"forum/new",data:{title:$("#ftitle").val(),context:$("#fcontext").val(),sid:getQueryString("sid")}},(function(e){v.forum.sending=0,v.forum.dialog=!1,location.href+="&t",alert(e.msg)})))},post:{text:{},studio:{},author:{},get:()=>{get({url:"forum/post",data:{id:getQueryString("id")}},(function(e){v.forum.post.text=e.data.text,v.forum.post.text.context2=markdownToHtml(v.forum.post.text.context),v.forum.post.studio=e.data.studio,v.forum.post.author=e.data.author,v.comment.getcomment()}))}}}},882:e=>{e.exports={get:()=>{get({url:"item/store"},(e=>{v.item.BagItems=e.data}))},BagItems:[],StoreItems:[]}},105:e=>{e.exports=[{title:"我的主页",c:function(){location.href="#page=user&id="+v.detail.id}},{title:"我的作品",c:function(){location.href="#page=mywork"}},{title:"我的工作室",c:function(){location.href="#page=mystudio"}},{title:"账号设置",c:function(){location.href="#page=account"}},{title:"邀请用户领金币",c:function(){dialog(`\n           你的专属链接<code>\n           ${"https://40code.com/#out=any&i="+v.detail.id}\n           </code><br>\n           别人通过你的专属链接进行账号注册<br>\n           你和他都可获得20金币\n           `)}},{title:"刷新",c:function(){-1==location.href.indexOf("#")?location.href=location.href+"#t="+new Date/1:location.href=location.href+"&t="+new Date/1}},{title:"退出登录",c:function(){document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 GMT",console.log("清除cookie"),location.href=""}}]},115:e=>{e.exports=[e=>{let t=new FormData;return console.log(e),e.size>5e5?"图片必须小于500KB":-1==["image/jpeg","image/png","image/gif","image/bmp"].indexOf(e.type)?"不支持此格式的图片":(t.append("image",new Blob([e],{type:e.type})),void function(t){v.waitRequest.cover=1,$.ajax({url:apihost+"work/uploads",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(t){let n=t.data[2][0][1].Key.split("/");v.detail.image=v.workview.image=n[n.length-1],e=void 0,v.waitRequest.cover=-1},error:function(){alert("图片上传失败"),v.waitRequest.cover=-1,delete v.waitRequest.cover}})}(t))}]},557:e=>{e.exports={search:()=>{setTimeout((()=>{-1==v.search.s2&&(v.search.s2=0),location.href="#page=search&name="+($("#sname").val()||"")+"&author="+($("#sauthor").val()||"")+"&type="+v.search.type+"&p="+v.search.page+"&s="+v.search.s2}),1)},work:{},studio:[],user:[],page:1,num:0,time:0,s:[["最早创建","最早发布","最近更新","最近发布","最多点赞","最多浏览"],["最多金币","最新注册","最早注册"],["最多成员","最多作品","最早创建","最新创建"]],isfirst:1,select:["最新发布","最多金币","最多成员"]}},545:e=>{e.exports={email:[e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"请输入正确的邮箱"],l:function(e){v.sign.token?get({url:"user/"+["login","signup"][e],data:{email:$("#email").val(),pw:$("#pw").val(),t2:v.sign.token,i:getCookie("i")},p:"sign"},(function(t){pagecz.sign(),1==t.code?0==e?(location.href=getQueryString("url")?atob(getQueryString("url")):"#",alert(t.msg),setCookie("token",t.token,30),getuserinfo()):alert(t.msg):alert(t.msg,8e3)})):alert("请先完成验证码")},data:{email:"",pw:""},go:()=>{location.href="#page=sign&url="+btoa(location.href)}}},771:e=>{e.exports={new:function(){confirm("你确定要创建工作室吗？")&&get({url:"studio/new",p:"newstudio"},(function(e){-1!=e.code?location.href="/#page=studio&id="+e.id:alert(e.msg)}))},my:[],info:null,ilist:[],getwork:()=>{get({url:"studio/work",data:{id:v.studio.info.id}},(e=>{v.studio.worklist=e.data}))},getuser:()=>{get({url:"studio/user",data:{id:v.studio.info.id}},(e=>{v.studio.userlist=e.data,v.studio.p=e.p}))},worklist:[],p:void 0,update:function(){let e={};e.name=$("[t='s-name']").val(),e.introduce=$("[t='s-introduce']").val(),e.color=$("[t='s-color']").val(),e.chose=v.studio.info.chose,e.head=v.detail.image,e.id=v.studio.info.id,e.haspw=v.studio.info.haspw,e.pw=$("[t='s-pw']").val(),console.log(e),post({url:"studio/info/update",data:e,p:"updatestudio"},(function(e){console.log(e)}))},quit:()=>{confirm("你确定要退出吗")&&post({url:"studio/quit",data:{id:v.studio.info.id}},(function(e){}))},join:()=>{2==v.studio.info.chose&&alert("此工作室禁止任何人加入"),post({url:"studio/join",data:{pw:v.studio.info.haspw&&prompt("请输入工作室加入密码"),id:v.studio.info.id}})},main:()=>{post({url:"studio/setmain",data:{id:v.studio.info.id}})},upload:()=>{let e,t=prompt("请输入作品的链接或id");if(isNaN(parseInt(t,10))){if(t.indexOf("#")<0)return void alert("请输入正确的链接");let n=new RegExp("(^|&)id=([^&]*)(&|$)","i");if(e=t.split("#")[1].match(n)[2],!e)return void alert("请输入正确的链接")}else e=t;post({url:"studio/upload",data:{id:v.studio.info.id,work:e}})},chose:"0"}},490:e=>{e.exports={getwork:e=>{get({url:"work/user",data:{id:v.workview.id,l:e}},(e=>{v.worklist=e.data,console.log("获取评论",e)}))},getmessage:()=>{get({url:"user/message",data:{l:20,o:20*(v.user.msgpage-1)}},(e=>{let t=e.data;for(let e in t)t[e].time=other.date(t[e].time);v.user.message=t,Vue.set(v.user,"msgtotal",e.num),console.log("获取消息",e),v.detail.msgnum=0}))},follow:()=>{post({url:"user/follow"+(v.workview.followu?"/cancel":""),data:{id:v.workview.id}},(e=>{alert(e.msg),v.workview.followu=!v.workview.followu}))},getlist:e=>{get({url:"user/flist",data:{id:e,type:getQueryString("f")?1:0}},(e=>{v.user.flist=e.data}))},signin:()=>{post({url:"user/signin",p:"signin"},(e=>{alert(e.msg,1e4)}))},flist:[],list:[],message:{},msgpage:1,msgtotal:0,flisttype:!!getQueryString("type")-0,delmsg:e=>{post({url:"/user/message/delete",data:{id:e}},(()=>{v.user.getmessage()}))},edit:0}},378:e=>{e.exports={checkbox:[],new:function(){get({url:"work/new",p:"newwork"},(function(e){location.href="/other/scratch.html#id="+e.info.insertId}))},update:function(){$("[name='editinfo']");let e={};e.name=$("[t='name']").val(),e.introduce=$("[t='introduce']").val(),e.opensource=$("[t='opensource']")[0].checked,e.publish=$("[t='publish']")[0].checked,e.image=v.workview.image,e.id=v.$data.workview.id,console.log(e),post({url:"work/info/update",data:e,p:"updatework"},(function(e){console.log(e),location.href="#page=work&id="+v.$data.workview.id}))},return:function(){location.href="#page=work&id="+v.$data.workview.id},all:function(e){e&&(location.href="#page=allwork"+e),setTimeout((()=>{get({url:"work/all",data:{tags:getQueryString("tags"),user:getQueryString("user"),name:getQueryString("name")}},(function(e){v.$data.rows=[{title:"作品",worklist:e.data.worklist,userlist:e.data.userlist}]}))}))},search:function(){location.href="#page=allwork&name="+$("#sname").val()+"&user="+$("#sauthor").val()},like:()=>{post({url:"work/like"+(v.workview.islike?"/cancel":""),data:{id:v.workview.id}},(e=>{alert(e.msg),v.workview.islike?v.workview.like--:v.workview.like++,v.workview.islike=!v.workview.islike}))},del:e=>{confirm("你确定要删除此作品吗")&&post({url:"work/delete",data:{id:e}},(e=>{alert(e.msg),v.qh2()}))},share:()=>{dialog(`\n            通过分享作品到其他平台，他人通过链接注册账号，你和他都可获得20金币<br>\n            还可以让你的作品有更多人看到<br>\n            链接：<code>${location.href+"&out=any&i="+v.detail.id}</code>\n            推荐分享形式(不推荐在他人作品下发)<br>\n            复制内容到相应位置即可\n            <h2>若你要分享到A营：</h2>\n            1.自己A营个人主页的简介\n            <code>\n                [${v.workview.name}](${location.href+"&out=aying&i="+v.detail.id})\n            </code>\n            2.A营同个作品的介绍\n            <code>\n                [这个作品也发布到了40code](${location.href+"&out=aying&i="+v.detail.id})\n            </code><br>\n            3.A营其他人主页评论(不建议)\n            <code>\n                [对方称呼]，你好，请问你能看看[${v.workview.name}](${location.href+"&out=aying&i="+v.detail.id})吗？非常感谢。\n            </code><br>\n            <h2>若你要分享到小码王、scratch中社、共创世界：</h2>\n            1.自己这些平台主页下的进行留言<br>\n            <code>\n                我在40code发了一个作品，链接：${location.href+"&out=any&i="+v.detail.id}\n            </code>\n            2.这些平台同个作品的介绍\n            <code>\n                这个作品也发布到了40code: ${location.href+"&out=any&i="+v.detail.id})\n            </code>\n            3.这些平台其他人主页评论(不建议)\n            <code>\n                [对方称呼]，你好，请问你能看看${v.workview.name}吗？非常感谢。链接： ${location.href+"&out=any&i="+v.detail.id}\n            </code><br>\n            <h2>若你要分享到QQ、微信：</h2>\n            <code>[对方称呼]，你好，请问你能看看我的scratch作品(${v.workview.name})吗？非常感谢。<br>链接： ${location.href+"&out=any&i="+v.detail.id}<br>请复制链接到浏览器访问</code>\n            `)},analysis:()=>{alert("请稍等");var e=["control_start_as_clone","procedures_definition","event_whenflagclicked","event_whenkeypressed","event_whenstageclicked","event_whenthisspriteclicked","event_whenbackdropswitchesto","event_whengreaterthan","event_whenbroadcastreceived","makeymakey_whenMakeyKeyPressed","makeymakey_whenCodePressed"],t=JSON.parse(top[0].vm.toJSON());if(!t.targets.length)return void alert("请等待作品加载完毕再进行分析");var n=t.targets,o={},a=0,i=0,s=0;for(let m=0;m<n.length;m++){let u=n[m].blocks,p=Object.keys(u);for(let g=0;g<p.length;g++){try{function r(e,t=0){return e.next?r(u[e.next],t+1):t}if(u[p[g]].topLevel&&(i++,-1!==e.indexOf(u[p[g]].opcode))){let f=r(u[p[g]]);f&&(s++,a+=f+1)}}catch(h){console.log(h)}try{let w=u[p[g]].opcode.split("_")[0];void 0===o[w]?o[w]=1:o[w]++}catch(y){console.log(y)}}}console.log(o);var c=t.targets.length-1,l=top[0].vm.assets.length;let d={context:o,info:v.workview.name+"-"+v.workview.nickname,segs:i,vsegs:s,valid:a,jn:c,an:l};console.log(d),open("/other/analysis.html#"+encodeURI(JSON.stringify(d)))}}},104:e=>{e.exports=function(e){getuserinfo(),v.stitle("账号设置")}},174:e=>{e.exports=e=>{getQueryString("f")?v.stitle("关注列表"):v.stitle("粉丝列表"),v.user.getlist(e)}},828:e=>{e.exports=function(){v.stitle("40code少儿编程社区"),get({url:"work/index"},(function(e){v.$data.rows=e.data})),get({url:"user/clist"},(function(e){v.user.list=e.data})),get({url:"studio/index"},(function(e){v.studio.ilist=e.data}))}},251:e=>{e.exports=e=>{v.stitle("消息"),v.user.getmessage()}},209:e=>{e.exports=function(){v.stitle("我的工作室"),get({url:"studio/my"},(function(e){Vue.set(v.studio,"my",e.data)}))}},715:e=>{e.exports=function(){v.stitle("我的作品"),get({url:"work/my"},(function(e){v.$data.mywork=e.data})),location.href="#page=mywork"}},116:e=>{e.exports=e=>{Vue.set(v.search,"type",getQueryString("type")),v.search.page=+getQueryString("p")||1,v.search.type=+getQueryString("type")+1?+getQueryString("type"):0,Vue.set(v.search,"work",{}),Vue.set(v.search,"studio",{}),Vue.set(v.search,"user",{}),Vue.set(v.search,"s2",getQueryString("s")),Vue.set(v.search,"name",getQueryString("name")),Vue.set(v.search,"author",getQueryString("author")),post({url:"/search/",data:{name:getQueryString("name"),author:getQueryString("author"),type:getQueryString("type"),s:getQueryString("s")||0,page:v.search.page}},(function(e){Vue.set(v.search,["work","user","studio"][+getQueryString("type")],e.data),Vue.set(v.search,"num",e.data.num),Vue.set(v.search,"time",e.data.time),Math.ceil(v.search.num/12)<v.search.page&&0!=v.search.num&&(v.search.page=Math.ceil(v.search.num/12))}))}},253:e=>{e.exports=()=>{v.stitle("登录注册"),setTimeout((()=>{myCaptcha=_dx.Captcha(document.getElementById("c1"),{appId:"39248c3724c1b6b8f2b77645fde5b19e",apiServer:"https://vip56.dingxiang-inc.com",success:function(e){v.sign.token=e}})}),200)}},758:e=>{e.exports=function(e){v.stitle("工作室"),Vue.set(v.studio,"info",null),Vue.set(v.studio,"userlist",null),get({url:"studio/info",data:{id:e}},(function(e){e.data&&(Vue.set(v.studio,"info",e.data),v.studio.info.introduce2=v.studio.info.introduce?markdownToHtml(v.studio.info.introduce):"当前工作室暂时没有介绍哦",v.studio.chose=v.studio.chose.toString(),v.comment.getcomment(),v.studio.getwork(),v.studio.getuser(),setTimeout((()=>{$("#comment").bind("paste",v.paste)}),100))}))}},811:e=>{e.exports=function(e){v.stitle("工作室设置"),Vue.set(v.studio,"info",null),get({url:"studio/info",data:{id:e}},(function(e){e.data&&Vue.set(v.studio,"info",e.data)}))}},534:e=>{e.exports=function(e){v.stitle("用户"),v.user.edit=0,v.$data.workview={image:"6e2b0b1056aaa08419fb69a3d7aa5727.png"},get({url:"user/info",data:{id:e}},(function(e){console.log(e),e.data&&(v.stitle(e.data[0]&&e.data[0].nickname),v.$data.workview=e.data[0],v.workview.introduce2=v.workview.introduce?markdownToHtml(v.workview.introduce):"当前用户暂时没有介绍哦",v.comment.getcomment(),v.user.getwork(6),setTimeout((()=>{$("#comment").bind("paste",v.paste)}),100))}))}},960:e=>{e.exports=function(e){v.stitle("scratch作品"),v.$data.workview={id:0},get({url:"work/info",data:{id:e}},(function(e){let t=e.data;t?(t.introduce2=markdownToHtml(t.introduce),v.workview=t,v.comment.getcomment(),v.title=t.name+" by "+t.nickname,setTimeout((()=>{$("#comment").bind("paste",v.paste)}),100)):alert("服务器或网络错误")}))}},516:e=>{e.exports=function(e){v.$data.workview={image:"6e2b0b1056aaa08419fb69a3d7aa5727.png"},delete waitRequest.cover,v.stitle("作品信息设置"),get({url:"work/info",data:{id:e}},(function(e){if(!e.data)return;let t=e.data;getQueryString("publish")&&(t.publish=1),v.workview=t,v.opensource=t.opensource,v.publish=t.publish}))}},831:e=>{e.exports={props:["comment","host","detail","type","author"],template:'<div v-if="comment.comment" class="my-5">\n<div v-for="i in comment.comment.comment" class="my-6">\n    <div v-for="j in comment.comment.user[i.fromuser.toString()]" class="mt-2">\n        <div>\n            <v-row  no-gutters>\n                <span style="flex: 0 0 5px;"></span>\n                <span style="flex: 0 0 10px;" class="mt-1">\n                    <a :href="\'#page=user&id=\'+i.fromuser">\n                        <v-avatar size=40 class="">\n                            <img\n                                :src="host.data+\'/static/internalapi/asset/\'+(j.head || \'6e2b0b1056aaa08419fb69a3d7aa5727.png\')">\n                        </v-avatar>\n                    </a>\n                </span>\n                <span style="flex: 0 0 10px;"></span>\n                <span style="flex: 0 0 calc( 100% - 60px)">\n                    <v-row no-gutters>\n                        <v-col cols="12">\n                            <a :href="\'#page=user&id=\'+i.fromuser">\n                                {{ j.nickname }} <span style="color:#888;font-size: 7px;">{{ i.time }}</span>\n                            </a>\n                            <a :href="`#page=studio&id=${comment.comment.studio[j.studio].id}`"\n                                v-if="comment.comment.studio[j.studio]">\n                                <v-btn  style="text-transform: none!important;"\n                                    :color="comment.comment.studio[j.studio].color || \'green\'" class="sd tg" small>\n                                    <span style="color:white">{{ comment.comment.studio[j.studio].name }}</span>\n                                </v-btn>\n                            </a>\n                        </v-col>\n                        <v-col cols="12">\n                            <span color="accent" class="pm" v-html="i.comment"></span>\n                            <v-btn class="text--secondary float-left" text small v-on:click="comment.showreply(i.id)" style="margin-top: -15px;">\n                                <v-icon>mdi-reply</v-icon> 回复\n                            </v-btn>\n                            <v-btn class="text--secondary float-right" text small style="margin-top: -15px;"\n                                v-if="detail.id==i.touser || detail.id==i.fromuser"\n                                v-on:click="comment.delete(i.id)">\n                                <v-icon>mdi-delete</v-icon> 删除\n                            </v-btn>\n                            <br>\n                            <span v-if="comment.replyid==i.id">\n                                <br>\n                                <s-c2 :comment="comment" :host="host" :detail="detail" :reply="i.id" class="mt">\n                                </s-c2>\n                            </span>\n\n                            \n                        </v-col>\n                    </v-row>\n                </span>\n\n            </v-row>\n        </div>\n        <div v-if="i.replynum">\n            <div v-for="k in comment.comment.reply[i.id.toString()]">\n                <div v-for="j in comment.comment.user[k.fromuser.toString()]" class="mt-2">\n\n                    <v-row no-gutters>\n                        <span style="flex: 0 0 35px;"></span>\n                        <span style="flex: 0 0 10px;" class="mt-1">\n                            <a :href="\'#page=user&id=\'+i.fromuser">\n                                <v-avatar size=40 class="">\n                                    <img\n                                        :src="host.data+\'/static/internalapi/asset/\'+(j.head || \'6e2b0b1056aaa08419fb69a3d7aa5727.png\')">\n                                </v-avatar>\n                            </a>\n                        </span>\n                        <span style="flex: 0 0 15px;"></span>\n                        <span style="flex:0 0 calc( 100% - 95px )">\n                            <v-row no-gutters>\n                                <v-col cols="12">\n                                    <a :href="\'#page=user&id=\'+k.fromuser">\n                                        {{ j.nickname }} <span style="color:#888;font-size: 7px;">{{ k.time }}</span>\n                                    </a>\n                                    <a :href="`#page=studio&id=${comment.comment.studio[j.studio].id}`"\n                                        v-if="comment.comment.studio[j.studio]">\n                                        <v-btn  style="text-transform: none!important;"\n                                            :color="comment.comment.studio[j.studio].color || \'green\'" class="sd tg" small>\n                                            <span style="color:white">{{ comment.comment.studio[j.studio].name }}</span>\n                                        </v-btn>\n                                    </a>\n                                </v-col>\n                                <v-col cols="12">\n                                    <span color="accent" class="pm" v-html="k.comment"></span>\n                                    <v-btn class="text--secondary float-left" text small v-on:click="comment.showreply(i.id,k.id)" style="margin-top: -15px;">\n                                        <v-icon>mdi-reply</v-icon> 回复\n                                    </v-btn>\n                                    <v-btn class="text--secondary float-right" text small\n                                        v-if="detail.id==k.fromuser" style="margin-top: -15px;"\n                                        v-on:click="comment.deletereply(k.id)">\n                                        <v-icon>mdi-delete</v-icon> 删除\n                                    </v-btn>\n                                </v-col>\n                            </v-row>\n                        </span>\n                        \n                        \n                    </v-row>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="text-center my-3" v-if="comment.comment.num>0">\n    <v-pagination v-model="comment.page" :length="Math.ceil(comment.comment.num/6)" :total-visible="7">\n    </v-pagination>\n</div>\n</div>\n<div v-else>\n此用户暂时没有评论哦\n</div>'}},370:e=>{e.exports={props:["comment","reply"],template:'<span>\n    <v-textarea clearable v-model="comment.text[reply?\'c-\'+reply:\'comment\']"\n    clear-icon="mdi-close-circle" :id="reply?\'c-\'+reply:\'comment\'" filled label="评论" auto-grow :value="comment.text[reply?\'c-\'+reply:\'comment\']" maxlength="500" counter>\n    </v-textarea>\n    <v-btn class="pa-2 mx-auto sd" v-on:click="comment.send(reply)"  color="accent"  block>发送</v-btn>\n</span>\n'}},421:e=>{e.exports={props:["info"],template:"<template>\n    \n    </template>"}},359:e=>{e.exports={props:["studio","host"],template:'\n    <v-card :href="\'#page=studio&id=\'+studio.id" class="rounded-lg py-2 sd">\n\n    <v-row class="pa-5">\n        <v-col cols="4">\n            <v-avatar size="50">\n                <img\n                    :src="host.data+\'/static/internalapi/asset/\'+(studio.head || \'6e2b0b1056aaa08419fb69a3d7aa5727.png\')" />\n            </v-avatar>\n        </v-col>\n        <v-col cols="8">\n            <span color="accent" class="\n            text-h5 text--secondary text-truncate text-caption\n            pr-3\n            ">\n                <div class="row">\n                    <div class="col-12 text-truncate">\n                        {{ studio.name }}\n                    </div>\n                </div>\n\n                <span class="text--disabled">作品:</span>\n                <a style="color:#555">{{ studio.worknum }}</a>\n                <span class="text--disabled">成员:</span>\n                <a style="color:#555">{{ studio.membernum }}</a>\n            </span>\n\n        </v-col>\n    </v-row>\n</v-card>\n  \n'}},975:e=>{e.exports={props:["user","host"],template:'\n    <v-card :href="\'#page=user&id=\'+user.id" class="py-2 sd">\n  <v-row class="pa-5">\n    <v-col cols="4">\n      <v-avatar size="40">\n        <img :src="host.data+\'/static/internalapi/asset/\'+(user.head || \'6e2b0b1056aaa08419fb69a3d7aa5727.png\')" />\n      </v-avatar>\n    </v-col>\n    <v-col cols="8">\n      <span color="accent" class="\n          text-h5 text--secondary text-truncate text-caption\n          \n          pr-3\n          ">\n        <div class="row">\n          <div class="col-12 text-truncate">\n            {{ user.nickname }}\n          </div>\n        </div>\n        <span class="text-truncate"></span>\n        \x3c!--<a :href="`#page=studio&id=${studio.id}`" v-if="studio">\n          <v-chip class="ma-2" :color="studio.color || \'green\'" text-color="white">\n              {{ studio.name }}\n          </v-chip>\n          </a>--\x3e\n\n\n        <span class="text--disabled">金币:</span>\n        <a style="color:#FFC107">{{ user.coins }}</a>\n      </span>\n    </v-col>\n  </v-row>\n</v-card>\n  \n'}},355:e=>{e.exports={props:["work","user","host","my"],template:'\n    <v-card class=" mb-3 sd">\n    <v-card :href="\'#page=work&id=\'+work.id" elevation="0">\n        <v-img :src="host.data+\'/static/internalapi/asset/\'+work.image" :aspect-ratio="4/3"\n            class="white--text align-end" gradient="to bottom, rgba(0,0,0,0) 80%, rgba(0,0,0,.6)">\n            <span class="ma-2">\n                <span>\n                    <v-icon color="white" size="16">mdi-eye</v-icon> {{ work.look }}\n                </span>\n                <span class="ml-1">\n                    <v-icon color="white" size="16">mdi-heart</v-icon> {{ work.like }}\n                </span>\n            </span>\n        </v-img>\n        <div class="text-truncate px-5 mt-3 mb-1 text-heading-6">{{ work.name }}</div>\n        <span class="px-5 text-truncate text-caption row" v-if="user">\n            <span class="col-12 text-truncate">\n                <v-avatar size="25">\n                    <img\n                        :src="host.data+\'/static/internalapi/asset/\'+(user.head || \'6e2b0b1056aaa08419fb69a3d7aa5727.png\')">\n                </v-avatar>\n                <span class="text-subtitle-1 text--secondary "\n                    :href="\'#page=user&id=\'+work.author">{{\n                    user.nickname }}</span><br>\n                </a>\n                <span else><br></span>\n            </span>\n    </v-card>\n    <span v-if="my">\n        <v-btn color="green" text v-if="work.publish" depressed block text tile>已发布\n        </v-btn>\n        <v-btn color="red" text v-else depressed block text tile>未发布\n        </v-btn>\n        <span>\n            <v-btn color="accent" class="" v-if="my" :href="\'/editor.html#id=\'+work.id" target="_blank"\n                depressed text block>继续创作\n            </v-btn>\n            <v-btn color="accent" class="" v-if="my" v-on:click="my.del(work.id)" target="_blank"\n                depressed text block>删除\n            </v-btn>\n        </span>\n        <br>\n    </span>\n</v-card>\n    '}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(()=>{Vue.component("s-item",n(421)),Vue.component("s-comment",n(831)),Vue.component("s-c2",n(370)),Vue.component("s-workcard",n(355)),Vue.component("s-usercard",n(975)),Vue.component("s-studiocard",n(359)),window.alert=(e,t)=>{v.sb.text=e,v.sb.timeout=t||3e3,v.sb.show=1},window.dialog=e=>{v.sb2.text=e,v.sb2.show=1},window.markdownToHtml=e=>marked.parse(DOMPurify.sanitize(e)),window.pagecz={index:n(828),search:n(116),sign:n(253),mywork:n(715),mystudio:n(209),work:n(960),workinfo:n(516),user:n(534),account:n(104),message:n(251),flist:n(174),studio:n(758),studio_edit:n(811),forum:()=>{v.forum.getlist()},post:()=>{v.forum.post.get()},myitem:()=>{v.item.get()}};let e={rules:n(115),item:n(882),host:{data:"https://newsccode-1302921490.cos.ap-shanghai.myqcloud.com",scratch:"https://newsccode-1302921490.cos-website.ap-shanghai.myqcloud.com"},work:n(378),lb:[{href:"#page=post&id=5",src:"https://s1.ax1x.com/2022/05/01/OpXZoq.png"}],items:n(105),pw:e=>!/^[0-9]*$/.test(e)||e.length>9?e.length<6?"密码必须大于6位":void 0:"纯数字密码必须大于9位",sign:n(545),account:n(177),comment:n(201),user:n(490),studio:n(771),paste:e=>{console.log(e);let t=e.target.id;var n=(e=e.originalEvent).clipboardData,o=window.navigator.userAgent;if(e.clipboardData&&e.clipboardData.items&&!(n.items&&2===n.items.length&&"string"===n.items[0].kind&&"file"===n.items[1].kind&&n.types&&2===n.types.length&&"text/plain"===n.types[0]&&"Files"===n.types[1]&&o.match(/Macintosh/i)&&Number(o.match(/Chrome\/(\d{2})/i)[1])<49))for(var a=0;a<n.items.length;a++){var i=n.items[a];if("file"==i.kind){var s=i.getAsFile();if(0===s.size)return;if(s.size>81920)return void alert("图片大小不能大于80kb");var r=new FormData;function c(e){alert("图片上传中",9e3),$.ajax({url:"https://www.hualigs.cn/api/upload?token=cae93a8b4292f11486c738c9c25e5d68&apiType=huluxia",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){try{let n=""+e.data.url.huluxia;alert("图片上传成功"),v.comment.text[t]+="![]("+n+")"}catch(e){}},error:function(){alert("图片上传失败")}})}r.append("image",s),c(r)}}},search:n(557),forum:n(956)},t={workview:{image:"6e2b0b1056aaa08419fb69a3d7aa5727.png"},detail:void 0===getCookie("token")?void 0:0,token:getCookie("token"),viewmode:"index",qh:function(e,t){},qh3:function(e,t){v.$data.viewmode=e,pagecz[e]&&pagecz[e](t)},qh2:()=>{let e=getQueryString("page");e?-1!=["index","sign","account","mywork","work","workinfo","user","message","search","flist","mystudio","studio","studio_edit","about","forum","post","myitem"].indexOf(e)||(e="404"):e="index",v.$data.qh3(e,getQueryString("id"))},sb:{show:!1,text:"",timeout:2e3},sb2:{show:!1,text:""},publish:0,opensource:0,rows:{data:[]},show:{0:0,1:0,2:0},show0:0,show1:0,show2:0,mywork:{},waitRequest:{cover:0},worklist:0,title:"40code少儿编程社区",getQueryString,stitle:e=>{document.title=(e||v.title)+"  -40code",e&&(v.title=e)}};other={date:e=>{if(!e)return"未统计";let t="",n=new Date(1e3*e),o=new Date;var a;return t=n.getYear()==o.getYear()?n.getMonth()==o.getMonth()&&n.getDate()==o.getDate()?n.getHours()+":"+(a=n.getMinutes(),(Array(2).join("0")+a).slice(-2)+" "):n.getMonth()+1+"-"+n.getDate()+" ":n.getYear()+1900+"-"+(n.getMonth()+1)+"-"+n.getDate()+" ",t}},window.v=new Vue({el:"#app",data:Object.assign(e,t,other),vuetify:new Vuetify({theme:{light:{primary:"#3f51b5",secondary:"#03A9F4",accent:"#EC407A",error:"#F44336"}}}),watch:{"search.page":()=>{v.search.search()},"search.type":()=>{v.search.isfirst?v.search.isfirst=0:(v.search.page=1,v.search.author="",v.search.name="",v.search.search())},"comment.page":()=>{v.comment.getcomment()},"user.msgpage":()=>{setTimeout((()=>{v.user.getmessage()}),1)},"search.select":()=>{v.search.s2=v.search.s[v.search.type].indexOf(v.search.select[v.search.type])}}}),v.qh2(),window.addEventListener("hashchange",(function(e){console.log(e),v.qh2()})),$(document).ready((function(){getuserinfo(),viewer=new Viewer(document.body,{filter:function(e){let t=$(".pm");for(let n=0;n<t.length;n++)if(t[n].contains(e))return!0;return!1}}),document.addEventListener("visibilitychange",(function(){document.visibilityState,"visible"==document.visibilityState&&(v.stitle(),getuserinfo())})),setInterval((()=>{"visible"==document.visibilityState&&getuserinfo()}),4e4)}))})()})();